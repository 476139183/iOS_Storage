<p>我给一个高度为 40 的 view 设置底部两个半径为 40 的圆角：</p> <pre><code>let orangeView = UIView(frame: .init(x: 150, y: 100, width: 100, height: 40)) orangeView.backgroundColor = .orange view.addSubview(orangeView)  let orangeViewPath = UIBezierPath.init(roundedRect: .init(x: 0, y: 0, width: 100, height: 40), byRoundingCorners: [.bottomLeft, .bottomRight], cornerRadii: .init(width: 40, height: 40)) let orangeViewLayer = CAShapeLayer() orangeViewLayer.frame = orangeView.bounds orangeViewLayer.path = orangeViewPath.cgPath orangeView.layer.mask = orangeViewLayer </code></pre> <p>效果如下：</p> <div class="image-package"> <div class="image-container" style="max-width: 99px; max-height: 48px;"> <div class="image-container-fill" style="padding-bottom: 48.480000000000004%;"></div> <div class="image-view" data-width="99" data-height="48"><img data-original-src="//upload-images.jianshu.io/upload_images/1692043-7b631ee8767f638d.png" data-original-width="99" data-original-height="48" data-original-format="image/png" data-original-filesize="4158"></div> </div> <div class="image-caption"></div> </div> <p>很奇怪，圆角明明设置的是 40，结果却是 20。</p> <p>查看文档得到答案：</p> <blockquote> <p>cornerRadii<br> The radius of each corner oval. Values larger than half the rectangle’s width or height are clamped appropriately to half the width or height.</p> </blockquote> <p>就是说当 radius 大于 Rect 宽或高一半的时候，radius 等于 Rect 宽或高的一半。<br> 这就是为什么我设置 40 圆角却只展示了 20 的原因。</p> <h3>解决方案：</h3> <p>将 roundedRect 向上移的同时增加它的高度：</p> <pre><code>let orangeView = UIView(frame: .init(x: 150, y: 100, width: 100, height: 40)) orangeView.backgroundColor = .orange view.addSubview(orangeView)  let orangeViewPath = UIBezierPath.init(roundedRect: .init(x: 0, y: -40, width: 100, height: 80), byRoundingCorners: [.bottomLeft, .bottomRight], cornerRadii: .init(width: 40, height: 40)) let orangeViewLayer = CAShapeLayer() orangeViewLayer.frame = orangeView.bounds orangeViewLayer.path = orangeViewPath.cgPath orangeView.layer.mask = orangeViewLayer </code></pre> <p>效果：</p> <div class="image-package"> <div class="image-container" style="max-width: 90px; max-height: 45px;"> <div class="image-container-fill" style="padding-bottom: 50.0%;"></div> <div class="image-view" data-width="90" data-height="45"><img data-original-src="//upload-images.jianshu.io/upload_images/1692043-a6e43ecc216e83b5.png" data-original-width="90" data-original-height="45" data-original-format="image/png" data-original-filesize="4555"></div> </div> <div class="image-caption"></div> </div>
